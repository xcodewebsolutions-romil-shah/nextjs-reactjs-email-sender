(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[793],{41689:function(e,t,a){Promise.resolve().then(a.bind(a,80209)),Promise.resolve().then(a.bind(a,31528))},99227:function(e,t,a){"use strict";a.d(t,{F:function(){return i}});var n=a(20994),o=a(24086);let l=(0,n.ZF)({apiKey:"AIzaSyCgaCOl03vf4plSdXfs_mU1gmLPwNpjot4",authDomain:"mail-leads.firebaseapp.com",projectId:"mail-leads",storageBucket:"mail-leads.appspot.com",messagingSenderId:"765027549290",appId:"1:765027549290:web:ada721e668d6e9ce468a13",measurementId:"G-Z45NJC62VK"}),i=(0,o.ad)(l)},31528:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return el}});var n=a(57437),o=a(2265),l=a(24033),i=a(7660),r=a(3216),c=a(20791),s=a(13428),d=a(57042),p=a(40182),m=a(86871),u=a(28702),h=a(4951),g=a(67430),f=a(59592),x=a(16659),v=a(62423),w=a(20800);function b(e){return(0,w.ZP)("PrivateSwitchBase",e)}(0,v.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);let y=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Z=e=>{let{classes:t,checked:a,disabled:n,edge:o}=e,l={root:["root",a&&"checked",n&&"disabled",o&&`edge${(0,u.Z)(o)}`],input:["input"]};return(0,p.Z)(l,b,t)},S=(0,h.ZP)(x.Z)(({ownerState:e})=>(0,s.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})),j=(0,h.ZP)("input",{shouldForwardProp:h.FO})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),k=o.forwardRef(function(e,t){let{autoFocus:a,checked:o,checkedIcon:l,className:i,defaultChecked:r,disabled:p,disableFocusRipple:m=!1,edge:u=!1,icon:h,id:x,inputProps:v,inputRef:w,name:b,onBlur:k,onChange:I,onFocus:C,readOnly:P,required:N=!1,tabIndex:F,type:R,value:z}=e,E=(0,c.Z)(e,y),[M,T]=(0,g.Z)({controlled:o,default:!!r,name:"SwitchBase",state:"checked"}),U=(0,f.Z)(),O=p;U&&void 0===O&&(O=U.disabled);let _="checkbox"===R||"radio"===R,B=(0,s.Z)({},e,{checked:M,disabled:O,disableFocusRipple:m,edge:u}),D=Z(B);return(0,n.jsxs)(S,(0,s.Z)({component:"span",className:(0,d.Z)(D.root,i),centerRipple:!0,focusRipple:!m,disabled:O,tabIndex:null,role:void 0,onFocus:e=>{C&&C(e),U&&U.onFocus&&U.onFocus(e)},onBlur:e=>{k&&k(e),U&&U.onBlur&&U.onBlur(e)},ownerState:B,ref:t},E,{children:[(0,n.jsx)(j,(0,s.Z)({autoFocus:a,checked:o,defaultChecked:r,className:D.input,disabled:O,id:_?x:void 0,name:b,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;let t=e.target.checked;T(t),I&&I(e,t)},readOnly:P,ref:w,required:N,ownerState:B,tabIndex:F,type:R},"checkbox"===R&&void 0===z?{}:{value:z},v)),M?l:h]}))});var I=a(59782),C=(0,I.Z)((0,n.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),P=(0,I.Z)((0,n.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),N=(0,I.Z)((0,n.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),F=a(56005);function R(e){return(0,w.ZP)("MuiCheckbox",e)}let z=(0,v.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),E=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],M=e=>{let{classes:t,indeterminate:a,color:n,size:o}=e,l={root:["root",a&&"indeterminate",`color${(0,u.Z)(n)}`,`size${(0,u.Z)(o)}`]},i=(0,p.Z)(l,R,t);return(0,s.Z)({},t,i)},T=(0,h.ZP)(k,{shouldForwardProp:e=>(0,h.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,t[`size${(0,u.Z)(a.size)}`],"default"!==a.color&&t[`color${(0,u.Z)(a.color)}`]]}})(({theme:e,ownerState:t})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,m.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${z.checked}, &.${z.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${z.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),U=(0,n.jsx)(P,{}),O=(0,n.jsx)(C,{}),_=(0,n.jsx)(N,{}),B=o.forwardRef(function(e,t){var a,l;let i=(0,F.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:r=U,color:p="primary",icon:m=O,indeterminate:u=!1,indeterminateIcon:h=_,inputProps:g,size:f="medium",className:x}=i,v=(0,c.Z)(i,E),w=u?h:m,b=u?h:r,y=(0,s.Z)({},i,{color:p,indeterminate:u,size:f}),Z=M(y);return(0,n.jsx)(T,(0,s.Z)({type:"checkbox",inputProps:(0,s.Z)({"data-indeterminate":u},g),icon:o.cloneElement(w,{fontSize:null!=(a=w.props.fontSize)?a:f}),checkedIcon:o.cloneElement(b,{fontSize:null!=(l=b.props.fontSize)?l:f}),ownerState:y,ref:t,className:(0,d.Z)(Z.root,x)},v,{classes:Z}))});var D=a(43226),$=a(15133),V=a(76623),H=a(42744),K=a.n(H),L=a(24086),A=a(62786),q=a(63014),G=a(41421),J=a(99227);let Y=a(3106),W=async e=>{try{let t=localStorage.getItem("accessToken");if(t){let a=G.KU.init({authProvider:async e=>{e(null,t)}});await a.api("/me/messages/".concat(e,"/replyAll")).post({comment:"Reply : ".concat(Y)})}}catch(e){console.log("Error",e)}},X=a(99644),Q=async e=>{try{let t=localStorage.getItem("accessToken");if(t){let a=G.KU.init({authProvider:async e=>{e(null,t)}});await a.api("/me/messages/".concat(e,"/replyAll")).post({comment:"Reply : ".concat(X)})}}catch(e){console.log("Error",e)}},ee=a(37453),et=async e=>{try{let t=localStorage.getItem("accessToken");if(t){let a=G.KU.init({authProvider:async e=>{e(null,t)}});await a.api("/me/messages/".concat(e,"/replyAll")).post({comment:"Reply : ".concat(ee)})}}catch(e){console.log("Error",e)}};var ea=a(85889),en=a.n(ea);let eo=(0,i.Cl)();var el=()=>{let[e,t]=(0,o.useState)([]),[a,c]=(0,o.useState)([]);(0,l.useRouter)(),(0,o.useEffect)(()=>{async function a(){t(await s())}console.log("userdata",e),a()},[]);let s=async()=>{let e=L.EK.now(),t=(0,L.IO)((0,L.hJ)(J.F,"data"),(0,L.ar)("response","in",["No-Response",""]),(0,L.ar)("followUpNo","<",4),(0,L.ar)("expectedFollowupDateTimeStamp",">=",e)),a=await (0,L.PL)(t),n=[];return a.forEach(e=>{n.push({id:e.id,...e.data()})}),n},d=e=>{let t=e.target.checked,a=e.target.id;!0===t?c(e=>[...e,a]):!1===t&&c(e=>e.filter(e=>e!==a))},p=async(e,a,n)=>{let o=localStorage.getItem("accessToken");if(o){let l=G.KU.init({authProvider:async e=>{e(null,o)}});setTimeout(async function(){let o=(await l.api("/me/mailFolders/sentitems/messages").orderby("sentDateTime desc").get()).value.find(e=>e.conversationId===n).id;await (0,L.r7)((0,L.JU)(J.F,"data",e),{followUpNo:a,recipientId:o}),t(await s())},2e3)}},m=async()=>{try{let t;let n=e.filter(e=>a.includes(e.id)),o=!1;n.forEach(e=>{a.forEach(async a=>{e.id===a&&(e.recipientId&&1===e.followUpNo?(o=!0,await W(e.recipientId),t=2,await p(e.id,t,e.conversationId)):e.recipientId&&2===e.followUpNo?(o=!0,await Q(e.recipientId),t=3,await p(e.id,t,e.conversationId)):e.recipientId&&3===e.followUpNo&&(o=!0,await et(e.recipientId),t=4,await p(e.id,t,e.conversationId)))})}),o&&(0,q.Am)("Mail sent successfully")}catch(e){console.log(e)}},u=(0,o.useMemo)(()=>[{id:"select",cell:e=>{let{row:t}=e;return(0,n.jsx)(B,{id:t.original.id,checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})}},eo.accessor("company",{header:"Company Name",cell:e=>{let{row:t}=e;return(0,n.jsx)(D.Z,{color:"text.primary",children:t.original.company})}}),eo.accessor("email",{header:"Email",cell:e=>{let{row:t}=e;return(0,n.jsx)(D.Z,{color:"text.primary",children:t.original.email})}}),eo.accessor("userName",{header:"Contact Person",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex items-center gap-4",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)(D.Z,{color:"text.primary",children:t.original.userName})})})}}),eo.accessor("expectedFollowupDate",{header:"Follow Up Date",cell:e=>{let{row:t}=e;return(0,n.jsx)(D.Z,{color:"text.primary",children:t.original.expectedFollowupDate})}}),eo.accessor("followUpNo",{header:"Follow Up No",cell:e=>{let{row:t}=e;return(0,n.jsx)(D.Z,{color:"text.primary",children:t.original.followUpNo})}})],[]),h=(0,r.b7)({data:e,columns:u,enableRowSelection:!0,getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),getPaginationRowModel:(0,i.G_)(),getFacetedRowModel:(0,i.o6)(),getFacetedUniqueValues:(0,i.JG)(),getFacetedMinMaxValues:(0,i.HO)()});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)($.Z,{children:[(0,n.jsx)("div",{className:"flex justify-end p-5 gap-4 flex-col items-start sm:flex-row sm:items-center",children:(0,n.jsx)(V.Z,{variant:"contained",onClick:()=>m(),className:"is-full sm:is-auto",children:"Send"})}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:en().table,children:[(0,n.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>{var t;return(0,n.jsx)("th",{children:e.isPlaceholder?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:K()({"flex items-center":e.column.getIsSorted(),"cursor-pointer select-none":e.column.getCanSort()}),children:[(0,r.ie)(e.column.columnDef.header,e.getContext()),null!==(t=({asc:(0,n.jsx)("i",{className:"ri-arrow-up-s-line text-xl"}),desc:(0,n.jsx)("i",{className:"ri-arrow-down-s-line text-xl"})})[e.column.getIsSorted()])&&void 0!==t?t:null]})})},e.id)})},e.id))}),0===h.getFilteredRowModel().rows.length?(0,n.jsx)("tbody",{children:(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:h.getVisibleFlatColumns().length,className:"text-center",children:"No data available"})})}):(0,n.jsx)("tbody",{children:h.getRowModel().rows.slice(0,h.getState().pagination.pageSize).map(e=>(0,n.jsx)("tr",{onClick:e=>d(e),className:K()({selected:e.getIsSelected()}),children:e.getVisibleCells().map(e=>(0,n.jsx)("td",{children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,n.jsx)(A.Z,{rowsPerPageOptions:[10,25,50],component:"div",className:"border-bs",count:h.getFilteredRowModel().rows.length,rowsPerPage:h.getState().pagination.pageSize,page:h.getState().pagination.pageIndex,SelectProps:{inputProps:{"aria-label":"rows per page"}},onPageChange:(e,t)=>{h.setPageIndex(t)},onRowsPerPageChange:e=>h.setPageSize(Number(e.target.value))})]})})}},3106:function(e){e.exports='\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n</head>\n<body>\n    <div>\n    <b>This is follow up 1</b>\n    </div>\n</body>\n</html>\n'},99644:function(e){e.exports='\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n</head>\n<body>\n    <div>\n    <b>This is follow up 2</b>\n    </div>\n</body>\n</html>\n'},37453:function(e){e.exports='\n<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n</head>\n<body>\n    <div>\n    <b>This is follow up 3</b>\n    </div>\n</body>\n</html>\n'},85889:function(e){e.exports={table:"table_table__cB3AL",cellWithInput:"table_cellWithInput__N6u24"}},24033:function(e,t,a){e.exports=a(15313)}},function(e){e.O(0,[358,174,582,8,977,158,971,938,744],function(){return e(e.s=41689)}),_N_E=e.O()}]);